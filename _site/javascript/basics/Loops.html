<!DOCTYPE html>
<html lang="jp">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" CONTENT="IE=EmulateIE7" />
  <title>JavaScript</title>
  <!-- Le styles -->
  <link href="/css/bootstrapx.css" rel="stylesheet">
  <link href="/css/bootstrap-glyphicons.css" rel="stylesheet">
  <link href="/css/logo.css" rel="stylesheet">
  <link href="/css/jklmain.css" rel="stylesheet">
  <link href="/css/monokai.css" rel="stylesheet">
</head>
<body>
  <div class="container">
        <div class="row">
      <div class="col-sm-5 col-md-5">
        <div id="logo"><span>koyamatch.com</span></div>
      </div>
      <div class="col-sm-7 col-md-7">
        <h1 id="subtitle" class="text-right">JavaScript</h1>
        <div class="row">
          <div class="col-md-4"></div>
          <div class="col-md-offset-4">
          <a href="/"><h4><span class="glyphicon glyphicon-home text-white"> home</span></h4></a>
          </div>
        </div>  
      </div>
    </div><!--/row-->

    
    <div class="row"><div class="col-sm-4">
  <a href="/javascript/"><h4><span class="glyphicon glyphicon-arrow-left text-white"> JavaScript home</span></h4></a>

</div></div>
<h2>Loops</h2>
<p class="meta">27 May 2014</p>

<div class="post">
<p>ループは、&quot;for&quot; や &quot;while&quot; を含め、条件が合うまで一連の命令を繰り返す</p>

<h2 id="toc_0">Counting With Loops</h2>

<h3 id="toc_1">One to Five</h3>

<p><em>fo## onsole.log(i)</em> を何度も実行します。</p>

<p>変数 <em>i</em> の値を変えることで、何回コードを実行するかを追跡しています。</p>

<p>ループ内のコードは変数 <em>i</em> を読むことができます。</p>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>

<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>ループ変数は、変数 <em>i</em> の変え方を示しています。</p>

<ul>
<li><p><em>i = 5</em> - 最初の値</p>

<h2 id="toc_2">* - 止めるとき</h2></li>
<li><p><em>i++</em>   - コード実行後にカウントアップ</p></li>
</ul>

<h3 id="toc_3">Counting by Twos</h3>

<p><em>i++</em> は、 <em>i</em> を１増します。</p>

<p>では１より多くを増やすにはこれを使います。</p>

<p><em>i += number</em></p>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>

<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="mi">6</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="toc_4">down</h2>

<p><em>for</em> ループは、カウントを増やすだけでなく減らすこともできます。</p>

<p>変数 <em>i</em> の初期値を大きくして、それを小さくしながらループさせます。</p>

<p>カウントを減らすには <em>i--</em> や <em>i -= number</em> を使います。</p>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>

<span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">5</span> <span class="p">;</span><span class="nx">i</span><span class="o">&gt;=</span><span class="mi">0</span> <span class="p">;</span><span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="toc_5">Looping in Arrays and Strings</h2>

<h3 id="toc_6">Looping Through Arrays</h3>

<p>ループをカウントして使えました。</p>

<p>そしてループを使って配列のすべての要素を扱うこともできます。</p>

<p>配列の各要素は位置番号(index：指標)を持っています。</p>

<p>まず、配列の全要素に渡り繰返すことは、配列の全指標に渡り繰返すことです。</p>

<p>配列の指標は 0 から始まり、配列の大きさ( <em>array.length</em> )引く１で終わります。</p>

<p>配列の指標番号(index number)がわかれば、
対応する配列要素( <em>array[indexNumber]</em> )を取得できます。</p>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">animals</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="s2">&quot;ferret&quot;</span><span class="p">];</span>

<span class="c1">// Loop goes here</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span> <span class="o">=</span><span class="nx">animals</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">animals</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="toc_7">Better, Stronger, Faster</h3>

<p>コードはより早く動くほうがいいです。</p>

<p>学習中のコードは、十分に早いとは言えません。</p>

<p><em>array.length</em> を読むプロセスは少し遅くなります。</p>

<p><em>for</em> ループの２番目、３番目のパラメータは、繰返し毎に評価されます。</p>

<p>その為、配列の要素が多い場合には時間がかかるかもしれません。</p>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">animals</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</code></pre></div>

<p>を追加し、式の評価を一度だけにします。</p>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">animals</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">,</span> <span class="s2">&quot;ferret&quot;</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">animals</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
<span class="c1">// Loop goes here</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;=</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">animals</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="toc_8">Looping Through Strings</h3>

<p>文字列は、基本的に文字の配列です。
配列の要素を扱うのと同様な方法で文字列の個々の文字を取得することができます。
 <em>string[indexNumber]</em></p>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">word</span> <span class="o">=</span> <span class="s2">&quot;code&quot;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">// Loop goes here</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">word</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">word</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="toc_9">Building substring (Part 1)</h3>

<p>substringはJavaScriptの関数です。文字列の一部を開始位置から終了位置
まで抜き取ります。この関数を <em>for</em> ループで作ってみます。</p>

<div class="highlight"><pre><code class="javascript"><span class="c1">// Define substring here</span>
<span class="kd">var</span> <span class="nx">substring</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">input</span><span class="p">,</span><span class="nx">start</span><span class="p">,</span><span class="nx">end</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">start</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span> <span class="o">=</span><span class="nx">end</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">input</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">substring</span><span class="p">(</span><span class="s2">&quot;lorem ipsum dolor&quot;</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span>
</code></pre></div>

<h3 id="toc_10">Building substring (Part 2)</h3>

<p>正しい文字を抜き取れたので、抜き取った文字を繋いで１つの文字列を作り、
呼び出し元へ返しましょう。</p>

<div class="highlight"><pre><code class="javascript"><span class="c1">// 空の文字列変数を用意する</span>
<span class="kd">var</span> <span class="nx">subset</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="c1">// substring を定義する</span>
<span class="kd">var</span> <span class="nx">substring</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">input</span><span class="p">,</span><span class="nx">start</span><span class="p">,</span><span class="nx">end</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">start</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span> <span class="o">=</span><span class="nx">end</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
    <span class="c1">//文字を繋げる</span>
    <span class="nx">subset</span> <span class="o">+=</span> <span class="nx">input</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="c1">// 結果の文字列を返す</span>
  <span class="k">return</span> <span class="nx">subset</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">substring</span><span class="p">(</span><span class="s2">&quot;lorem ipsum dolor&quot;</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">10</span><span class="p">));</span>
</code></pre></div>

<hr>

<h2 id="toc_11">While Loops</h2>

<h3 id="toc_12">Conditions!</h3>

<p><em>while</em> ループは、条件が真の間、繰り返します。</p>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">condition</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="k">while</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;I only print once!&quot;</span><span class="p">);</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="toc_13">Imitation is the Sincerest Form of Flattery</h3>

<p><em>while</em> ループはかなり柔軟です。</p>

<p><em>for</em> ループで出来ることは、できます。</p>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">while</span><span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="o">=</span> <span class="mi">5</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
  <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="toc_14">Counting Odd Numbers, Again</h3>

<p><em>while</em> ループでも <em>i</em> に２を加えることができます。</p>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">while</span><span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="o">=</span> <span class="mi">5</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
  <span class="nx">i</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="toc_15">Splitting Name (Part 1)</h3>

<p><em>while</em> ループは、コードで何かを探さなければならない時に、
それがどの位置にあるかわからない場合、特に役に立ちます。</p>

<p>名前の文字列を分割してファーストネームを取出す関数を作っていきます。</p>

<div class="highlight"><pre><code class="javascript"><span class="c1">// 関数を定義</span>
<span class="kd">var</span> <span class="nx">getFirstName</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fullName</span><span class="p">){</span>
  <span class="c1">// index変数を定義</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="c1">// 文字列長の変数を定義</span>
  <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">fullName</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="c1">// 繰り返し処理</span>
  <span class="k">while</span><span class="p">(</span><span class="nx">i</span><span class="o">&lt;</span> <span class="nx">length</span><span class="p">){</span>
    <span class="c1">// １文字出力</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">fullName</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
    <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span> <span class="p">;</span>

<span class="nx">getFirstName</span><span class="p">(</span><span class="s2">&quot;Take Koyan&quot;</span><span class="p">);</span>
</code></pre></div>

<h3 id="toc_16">Splitting Name (Part 2)</h3>

<p><em>while</em> ループの条件は柔軟です。今回は２つの条件を&quot;&amp;&amp;&quot;で組合せます。</p>

<p>ループの終了条件は、文字列が終わったか、空白があった時です。</p>

<div class="highlight"><pre><code class="javascript"><span class="c1">// 関数を定義</span>
<span class="kd">var</span> <span class="nx">getFirstName</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fullName</span><span class="p">){</span>
  <span class="c1">// 次の文字を保持する変数（先頭の文字を設定）</span>
  <span class="kd">var</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">fullName</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="c1">// index変数</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="c1">// 文字列長の変数</span>
  <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">fullName</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="c1">// 繰り返し</span>
  <span class="k">while</span><span class="p">(</span><span class="nx">i</span><span class="o">&lt;</span> <span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">next</span> <span class="o">!==</span><span class="s2">&quot; &quot;</span><span class="p">){</span>
    <span class="c1">// 文字出力</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">fullName</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
    <span class="c1">// indexのインクリメント</span>
    <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
    <span class="c1">// 次の文字を代入</span>
    <span class="nx">next</span> <span class="o">=</span> <span class="nx">fullName</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
  <span class="p">}</span>
<span class="p">}</span> <span class="p">;</span>

<span class="nx">getFirstName</span><span class="p">(</span><span class="s2">&quot;Take Koyan&quot;</span><span class="p">);</span>
</code></pre></div>

<h3 id="toc_17">Splitting Name (Part 3)</h3>

<p>個々の文字を１つの文字列に繋げて、呼び出し元へ返しましょう。</p>

<div class="highlight"><pre><code class="javascript"><span class="c1">// 抜取った文字を格納する変数</span>
<span class="kd">var</span> <span class="nx">firstName</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="c1">// 関数定義</span>
<span class="kd">var</span> <span class="nx">getFirstName</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fullName</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">fullName</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">fullName</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="k">while</span><span class="p">(</span><span class="nx">i</span><span class="o">&lt;</span> <span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">next</span> <span class="o">!==</span><span class="s2">&quot; &quot;</span><span class="p">){</span>
    <span class="c1">// 文字列を繋げる</span>
    <span class="nx">firstName</span> <span class="o">+=</span> <span class="nx">fullName</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
    <span class="nx">next</span> <span class="o">=</span> <span class="nx">fullName</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="c1">// 文字列を返す</span>
  <span class="k">return</span> <span class="nx">firstName</span><span class="p">;</span>
<span class="p">}</span> <span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">getFirstName</span><span class="p">(</span><span class="s2">&quot;Take Koyan&quot;</span><span class="p">));</span>
</code></pre></div>

</div>

 
        <div class="row">
      <footer>
        <hr>
        <div class="col-sm-8">
          <p>&copy;koyamatc@koyamatch.com since 2002</p>
        </div>
        <div class="col-sm-2">
          <p><a href="https://github.com/koyamatc">github.com/koyamatc</a></p>
        </div>
        <div class="col-sm-2">
          <p><a href="https://www.facebook.com/koyamatc">www.facebook.com/koyamatc</a></p>
        </div>
      </footer>
    </div>

  </div><!-- container -->

  <!-- JavaScript Libraries -->
  <script src="/js/jquery.js"></script>
  <script src="/js/bootstrap.js"></script>
  <script src="/js/jquery.lettering-0.6.1.min.js"></script>
  <script src="/js/logo.js"></script>
</body>
</html>

